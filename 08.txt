Цикл завершается, когда количество изменений не равно 0, это неправильно, должно быть наоборот: завершение, когда swapped == 0
